<div *ngIf="book" class="book-details-container">
  <img [src]="getCoverImageUrl(book.coverImage)" class="book-image" alt="{{book.title}}">
  <div class="book-info">
    <h2>{{book.title}}</h2>
    <p><strong>Author:</strong> {{book.author}}</p>
    <p><strong>Price:</strong> ${{book.price}}</p>
    <p><strong>Description:</strong> {{book.description}}</p>
    <p><strong>Average Rating:</strong> {{getAverageRating()}} / 5</p>
    <div class="cart-actions">
      <input type="number" [(ngModel)]="quantity" min="1" value="1" class="quantity-input">
      <button (click)="addToCart()">Add to Cart</button>
    </div>
  </div>

  <!-- Comment Section -->
  <div class="comment-section">
    <h3>Comments</h3>
    <textarea [(ngModel)]="newComment" placeholder="Write a comment..."></textarea>
    <button (click)="submitComment()">Submit Comment</button>
    <div *ngFor="let comment of comments" class="comment">
      <p>{{comment.comment}}</p>
      <small>{{comment.date | date:'short'}}</small>
    </div>
  </div>

  <!-- Rating Section -->
  <div class="rating-section">
    <h3>Rate this book</h3>
    <input type="number" [(ngModel)]="newRating" min="1" max="5" placeholder="Rate (1-5)">
    <button (click)="submitRating()">Submit Rating</button>
  </div>
</div>
